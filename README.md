# 反击噪音狗

这是一个用于应对噪音干扰的网页应用，主要针对手机端使用。

## 功能特点

- 播放各种反制噪音的音频
- 支持单个音源播放和多个音源自定义顺序播放
- 可自由设置播放顺序，支持重复添加同一音源
- 可设置播放次数和播放时间
- 支持添加和删除音源
- 移动端友好的界面设计
- 音量控制功能，直接在界面上调整音量
- 自动播放下一首功能，循环播放所有音源
- 自定义播放列表的保存和加载功能
- 支持后台播放和锁屏播放，关闭屏幕或切换应用也能继续播放
- 支持PWA（渐进式Web应用）功能，可添加到手机主屏幕像原生应用一样使用

## 使用方法

1. 直接点击音频项可立即播放单个音源
2. 选择播放模式：
   - "单个播放"：重复播放当前选择的音源
   - "顺序播放"：按设定顺序播放多个音源
   - "自动播放下一首"：按列表顺序依次播放所有音源
3. 自定义顺序播放设置：
   - 在"点击添加到播放序列"区域点击音源添加到播放序列
   - 可多次添加同一音源，按添加顺序播放
   - 可随时点击序列中的"×"移除不需要的音源
   - 点击"清空"按钮重新设置播放序列
   - 点击"保存"按钮保存当前播放序列
   - 点击"加载"按钮加载之前保存的播放列表
4. 可设置播放次数和播放时间限制
5. 使用音量滑块调整播放音量
6. 点击"+"按钮可添加新的音源（支持MP3格式）
7. 点击音源项右侧的"×"按钮可删除音源

## 添加到主屏幕（iOS和Android）

### iOS设备（Safari浏览器）：
1. 在Safari浏览器中打开应用
2. 点击分享按钮（底部工具栏中的方框和箭头图标）
3. 在弹出的菜单中，向下滚动并点击"添加到主屏幕"
4. 输入名称（默认为"反击噪音狗"）
5. 点击"添加"完成

### Android设备（Chrome浏览器）：
1. 在Chrome浏览器中打开应用
2. 点击菜单按钮（右上角三个点）
3. 选择"添加到主屏幕"或"安装应用"
4. 按照提示完成安装

添加到主屏幕后，应用将像原生应用一样运行，支持全屏模式、离线访问和后台播放。

## 音源管理

- 默认音源位于`music`文件夹中
- 上传的新音源将保存在浏览器缓存中
- 音源文件名将作为显示名称
- 默认音源不能被删除，只能删除用户上传的音源

### 添加新的默认音源

如果您想添加新的默认音源，请按照以下步骤操作：

1. 将新的MP3文件复制到`music`文件夹中
2. 运行更新脚本来刷新音源列表：
   - 在Windows系统上：双击运行`update_audio_list.bat`文件
   - 在Mac或Linux系统上：在终端中运行`./update_audio_list.sh`（可能需要先运行`chmod +x update_audio_list.sh`赋予执行权限）
3. 刷新网页或重新打开应用，新添加的音源将会显示在列表中

> 注意：添加的音频文件名最好使用中文，以便在界面上显示有意义的名称。

## 播放列表管理

- 保存播放列表：自定义的播放序列可保存为命名播放列表
- 加载播放列表：可随时加载之前保存的播放列表
- 删除播放列表：不再需要的播放列表可以删除
- 播放列表数据保存在浏览器本地存储中

## 锁屏和后台播放

- 支持在手机锁屏状态下继续播放音频
- 应用切换到后台时音频播放不会中断
- 锁屏界面显示正在播放的音频信息
- 锁屏界面可控制播放/暂停/停止操作
- 支持系统媒体控制（如耳机控制、通知栏控制等）

## PWA功能

- 离线工作：即使在无网络连接的情况下也能使用
- 后台运行：添加到主屏幕后可在后台持续播放音频
- 类原生体验：全屏显示，没有浏览器界面
- 自动更新：应用更新时会自动获取最新版本
- 安全性：使用HTTPS和安全的API

## 开发技术

- 原生JavaScript
- HTML5 Audio API
- 响应式CSS设计
- 本地存储(LocalStorage)用于保存用户设置和播放列表
- MediaSession API用于锁屏控制
- WakeLock API防止设备睡眠
- Service Worker用于离线缓存和PWA支持
- Web App Manifest用于定义PWA安装行为

## 注意事项

- 建议使用最新版本的Chrome、Firefox或Safari浏览器
- 在手机上使用时，需确保音量适中，避免扬声器损坏
- 部分浏览器可能会限制自动播放功能，需要用户手动触发播放
- 锁屏控制功能在部分设备上可能存在兼容性问题
- 为获得最佳体验，建议将网页添加到主屏幕作为PWA使用
- PWA离线模式下，无法访问网络音源，但缓存的音源和上传的音源仍可使用 